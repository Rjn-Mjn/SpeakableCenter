/* 
 * Secure Font Loading for Production Domain
 * Ensures fonts work on audiox.space with proper fallbacks
 */

/* Force HTTPS for all Google Fonts requests */
@import url("https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Pacifico&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,200..900;1,200..900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&display=swap");

/* Enhanced font variables with better fallbacks */
:root {
  /* Primary fonts with comprehensive fallbacks */
  --font-inter: "Inter", ui-sans-serif, system-ui, -apple-system, 
                BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", 
                Arial, "Noto Sans", sans-serif, "Apple Color Emoji", 
                "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
                
  --font-pacifico: "Pacifico", "Brush Script MT", "Lucida Handwriting", 
                   "Apple Chancery", "Zapf-Chancery", cursive;
                   
  --font-source-serif: "Source Serif Pro", ui-serif, Georgia, Cambria, 
                       "Times New Roman", Times, serif;
                       
  --font-kalam: "Kalam", "Comic Sans MS", "Chalkduster", "Bradley Hand", 
                "Marker Felt", "Trattatello", fantasy, cursive;
}

/* Detect if Google Fonts failed to load */
@supports (font-display: swap) {
  .fonts-fallback :root {
    --font-inter: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 
                  "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
    --font-pacifico: "Brush Script MT", "Lucida Handwriting", cursive !important;
    --font-source-serif: ui-serif, Georgia, "Times New Roman", serif !important;
    --font-kalam: "Comic Sans MS", "Chalkduster", cursive !important;
  }
}

/* Critical font loading error handling */
.font-load-error {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, 
               "Helvetica Neue", Arial, sans-serif !important;
}

/* Network-aware font loading */
@media (prefers-reduced-data: reduce) {
  /* Use system fonts when user prefers reduced data */
  :root {
    --font-inter: ui-sans-serif, system-ui, sans-serif !important;
    --font-pacifico: "Brush Script MT", cursive !important;
    --font-source-serif: ui-serif, Georgia, serif !important;
    --font-kalam: "Comic Sans MS", cursive !important;
  }
}

/* Offline detection and fallbacks */
@media (max-width: 0px) {
  /* This never matches, but some browsers use it for offline detection */
  :root {
    --font-inter: system-ui, sans-serif !important;
  }
}
